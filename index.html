<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>ALMAHS</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
    margin:0;
    height:100vh;
    background:#0b1220;
    font-family:system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    color:#fff;
    transition: background 0.3s, transform 0.1s;
}

#splash{
    position:fixed;
    top:0; left:0;
    width:100%; height:100%;
    background:#020617 url('ALMAHS_icon.png') center center no-repeat;
    background-size:contain;
    z-index:9999;
}

#gameContent{
    display:none;
}

.app{
    width:100%;
    max-width:390px;
    height:100%;
    background:#020617;
    display:flex;
    flex-direction:column;
}

.header{
    padding:20px;
    text-align:center;
    font-size:22px;
    font-weight:600;
    background:#020617;
    border-bottom:1px solid #1e293b;
}

.screen{
    flex:1;
    padding:25px;
    display:flex;
    flex-direction:column;
    justify-content:center;
    text-align:center;
}

.screen p{
    opacity:.8;
}

input{
    margin-top:25px;
    padding:16px;
    font-size:20px;
    border:none;
    border-radius:14px;
    outline:none;
    text-align:center;
}

button{
    margin-top:15px;
    padding:16px;
    font-size:18px;
    border:none;
    border-radius:14px;
    background:#3b82f6;
    color:#fff;
    cursor:pointer;
}

button:active{
    transform:scale(.97);
}

#msg{
    margin-top:20px;
    font-size:20px;
    min-height:26px;
}

#stats{
    margin-top:10px;
    font-size:16px;
    opacity:0.7;
}

#proximityBar{
    width:0%;
    height:10px;
    background:#f97316;
    margin-top:10px;
    border-radius:5px;
    transition: width 0.3s;
}

.footer{
    padding:15px;
    display:flex;
    gap:10px;
    border-top:1px solid #1e293b;
}

.footer button{
    flex:1;
    background:#1e293b;
}

.reset{
    background:#ef4444;
}

#difficulty{
    margin-top:15px;
    padding:10px;
    border-radius:10px;
    border:none;
    font-size:16px;
    background:#1e293b;
    color:#fff;
}
</style>
</head>
<body>

<div id="splash"></div>

<div id="gameContent">
<div class="app">
    <div class="header"> ØªØ¯Ø±ÙŠØ¨Ø§Øª ÙˆØ§Ù† Ø§ÙƒØ³ Ø¨Øª Ù‡Ù‡Ù‡Ù‡Ù‡</div>

    <div class="screen">
        <p>Ø§Ù‡Ø¨Ø¯ Ø±Ù‚Ù…:</p>
        <input type="number" id="guess" placeholder=" Ø§Ù‡Ø¨Ø¯Ù‡ Ù‡Ù†Ø§">
        <button onclick="check()">Ø¬Ø±Ø¨</button>
        <div id="msg"></div>
        <div id="stats"></div>
        <div id="proximityBar"></div>
        <select id="difficulty" onchange="setDifficulty()">
            <option value="100">Ø³Ù‡Ù„ (1-100)</option>
            <option value="500">Ù…ØªÙˆØ³Ø· (1-500)</option>
            <option value="1000">ØµØ¹Ø¨ (1-1000)</option>
        </select>
    </div>

    <div class="footer">
        <button onclick="resetGame()">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø©</button>
        <button class="reset" onclick="newGame()">ğŸ†• Ø¬Ø¯ÙŠØ¯</button>
    </div>
</div>
</div>

<script>
let maxNumber = 100;
let secret = Math.floor(Math.random()*maxNumber)+1;
let attempts = 0;
let startTime = new Date();
let score = 0;

window.addEventListener('load', function(){
    setTimeout(function(){
        document.getElementById('splash').style.display = 'none';
        document.getElementById('gameContent').style.display = 'block';
    }, 2000);
});

function setDifficulty(){
    maxNumber = Number(document.getElementById('difficulty').value);
    newGame();
}

function shakeScreen(){
    let body = document.body;
    body.style.transform = "translateX(10px)";
    setTimeout(()=>{body.style.transform="translateX(-10px)";}, 100);
    setTimeout(()=>{body.style.transform="translateX(0)";}, 200);
}

function check(){
    let g = Number(document.getElementById("guess").value);
    let msg = document.getElementById("msg");
    attempts++;

    if(!g || g<1 || g>maxNumber){
        msg.style.color="#facc15";
        msg.innerHTML=`Ø§ÙƒØªØ¨ Ø±Ù‚Ù… Ø¨ÙŠÙ† 1 Ùˆ ${maxNumber}`;
        return;
    }

    let diff = Math.abs(secret - g);

    if(g === secret){
        let timeTaken = Math.floor((new Date() - startTime)/1000);
        msg.style.color="#22c55e";
        msg.innerHTML=`ğŸ‰ ÙƒØ³Ø¨Øª! Ø®Ù…Ù†Øª Ø§Ù„Ø±Ù‚Ù… ÙÙŠ ${attempts} Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ùˆ ${timeTaken} Ø«Ø§Ù†ÙŠØ©`;
        document.body.style.background = "#16a34a";
        score += 10;
    }else{
        shakeScreen();
        if(g < secret){
            msg.style.color="#f87171";
            msg.innerHTML=" Ù‡Ø§Øª Ø±Ù‚Ù… Ø§ÙƒØ¨Ø± Ø¹Ø´Ø§Ù† Ù…Ø³Ø¹ÙˆØ¯ Ù„Ùˆ Ø¹Ø±Ù Ù‡ÙŠØ§Ø®Ø¯Ùƒ Ø¹Ù„ÙŠÙ‡";
        }else{
            msg.style.color="#f87171";
            msg.innerHTML="Ù‡Ø§Øª Ø±Ù‚Ù… Ø§ØµØºØ± Ø¨Ø¯Ù„ Ù… Ø§Ø¨ÙˆÙ‡Ø´Ø§Ù… ÙŠØ¬ÙŠØ¨ Ø§Ù…ÙˆØ¨Ù„ÙŠ ÙˆÙŠØ¬ÙŠÙ„Ùƒ";
        }

        // Ù„ÙˆÙ† ØªØ¯Ø±ÙŠØ¬ÙŠ Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø±Ø¨
        if(diff <= maxNumber*0.1){
            document.body.style.background = "#f97316"; // Ù‚Ø±ÙŠØ¨ Ø¬Ø¯Ù‹Ø§ - Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ
        } else if(diff <= maxNumber*0.25){
            document.body.style.background = "#facc15"; // Ù‚Ø±ÙŠØ¨ - Ø£ØµÙØ±
        } else{
            document.body.style.background = "#0b1220"; // Ø¨Ø¹ÙŠØ¯ - Ø£Ø³Ø§Ø³ÙŠ
        }

        // ØªÙ„Ù…ÙŠØ­ ÙƒÙ„ 5 Ù…Ø­Ø§ÙˆÙ„Ø§Øª
        if(attempts % 5 === 0){
            let hint = (secret % 2 === 0) ? "Ø§Ù„Ø±Ù‚Ù… Ø²ÙˆØ¬ÙŠ" : "Ø§Ù„Ø±Ù‚Ù… ÙØ±Ø¯ÙŠ";
            msg.innerHTML += `<br>ØªÙ„Ù…ÙŠØ­: ${hint}`;
        }
    }

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ø±ÙŠØ·
    let percent = Math.max(5, 100 - (diff/maxNumber)*100);
    document.getElementById("proximityBar").style.width = percent + "%";

    document.getElementById('stats').innerHTML = `Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª: ${attempts} | Ø§Ù„Ø±Ù‚Ù… Ù…Ù† 1-${maxNumber} | Ø§Ù„Ù†Ù‚Ø§Ø·: ${score}`;
}

function resetGame(){
    secret = Math.floor(Math.random()*maxNumber)+1;
    attempts=0;
    startTime = new Date();
    document.getElementById("guess").value="";
    document.getElementById("msg").innerHTML="";
    document.getElementById('stats').innerHTML="";
    document.getElementById("proximityBar").style.width="0%";
    document.body.style.background = "#0b1220";
}

function newGame(){
    resetGame();
    alert(`Ø±Ù‚Ù… Ø¬Ø¯ÙŠØ¯ Ø¨ÙŠÙ† 1 Ùˆ ${maxNumber} ØªÙ… Ø§Ø®ØªÙŠØ§Ø±Ù‡!`);
}
</script>

</body>
</html>
